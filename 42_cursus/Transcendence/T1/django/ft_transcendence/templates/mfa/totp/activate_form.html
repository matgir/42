{% extends "allauth/layouts/base.html" %}
{% load allauth i18n %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<div class="container">
	<!-- Background Video -->
	<video autoplay muted loop class="video-background">
		<source src="{% static 'core/images/planet-background.mp4' %}" type="video/mp4">
		Your browser does not support the video tag.
	</video>

	<!-- Authenticator App Activation Section -->
	<div class="auth-app">
		<header class="auth-header">
			<h1 class="auth-title">
				{% translate "Activate Authenticator App" %}
			</h1>
			<p class="auth-description">
				{% blocktranslate %}
				To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below.
				{% endblocktranslate %}
			</p>
		</header>

		<section class="auth-content">
			{% url 'mfa_activate_totp' as action_url %}
			<form method="post" action="{{ action_url }}" class="auth-form">
				{% csrf_token %}
				{{ form.code.errors }}
				<!-- QR Code Section -->
				<div class="qr-code-container">
					<img src="{{ totp_svg_data_uri }}" alt="{% trans 'QR code for authentication' %}" class="qr-code">
				</div>

				<!-- Authenticator Secret -->
				<div class="form-group">
					<label for="authenticator_secret" class="form-label">{% translate "Authenticator secret" %}</label>
					<input
						id="authenticator_secret"
						type="text"
						value="{{ form.secret }}"
						disabled
						class="form-control"
						name="authentication"
					>
					<small class="form-help-text">
						{% translate "You can store this secret and use it to reinstall your authenticator app at a later time." %}
					</small>
				</div>
				<div class="form-group">
                    {% render_field form.code placeholder="Code" id="password" class="form-control" %}


				<!-- Form Actions -->
				<div class="form-actions">
					<input type="hidden" name="next" value="{% url 'core:my_profile' %}">
					<button type="submit" class="btn btn-primary">Activate</button>
				</div>
			</form>
		</section>
	</div>
</div>
{% endblock content %}
